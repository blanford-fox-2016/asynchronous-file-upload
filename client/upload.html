<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shopping Cart</title>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="container">

    <h1 class="text-center">Customer</h1>

    <form id="formulir" class="form-horizontal" enctype="multipart/form-data" method="post" action="http://localhost:3000/api/photos/upload">
        <div class="form-group">
            <label class="control-label col-sm-2">Gambar:</label>
            <div class="col-sm-10">
                <input type="file" class="form-control" name="gambar" id="gambar">
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button id="submitButton" type="submit" name="uploadImage" class="btn btn-default">Submit</button>
            </div>
        </div>
    </form>
    
    <div id="showImg">
        <a href=""><img src="" alt=""></a>
    </div>
</div>


<script src="javascripts/jquery-3.1.1.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>
<script src="javascripts/bootstrap.min.js"></script>


<script>

    $('#submitButton').on('click', function(e) {
        $('#formulir').ajaxSubmit({
            error: function(res) {
                console.log(`Error: ${res.status}`)
            },
            success: function(res) {
                console.log(res)
                $("#showImg a").attr("href", `http://localhost:3000/images/${res}`)
                $("#showImg img").attr("src", `http://localhost:3000/images/${res}`)

//                $("#status").empty()
//                $("#uploaded").show()
//                $("#uploaded a").attr("href", `images/${res}`)
//                $("#uploaded img").attr("src", `images/${res}`)
            }
        })
        e.preventDefault();
    })


    //    $('#formulir').submit((e) => {
//        var fd = {
//            'gambar': $('input[name=gambar]').val(),
//        };
//        console.log(fd)
//
//        $.ajax({
//            url: 'http://localhost:3000/api/photos/upload',
//            data: fd,
//            processData: false,
//            contentType: 'multipart/form-data',
//            type: 'POST',
//            success: function(res) {
//                console.log(res)
//            }
//        })
//        e.preventDefault()
//    })



</script>


</body>
</html>